import{a as h,j as e,r as p,u as O,F as w,L as z}from"./index-9fcefab8.js";import{F as T,k as Z,l as J,m as W}from"./index-4950111c.js";import{a as E,u as Y}from"./SetOutFucntions-b315eaf2.js";import{useCategories as j}from"./CategoiresContext-562232d7.js";import{D as x}from"./Gallary-a0a0b2ad.js";import"./firebase-config-409fc865.js";const Q=()=>{const{addAddress:y}=E();return h("form",{className:"address-popup",onSubmit:s=>{const{target:{firstname:v,lastname:g,zipcode:I,state:N,city:G,street:B,country:f}}=s;s.preventDefault();const m={firstname:v.value,lastname:g.value,zipcode:I.value,state:N.value,city:G.value,street:B.value,country:f.options[f.selectedIndex].innerText};y(m),s.target.remove()},children:[e("label",{htmlFor:"firstname",children:"first name"}),e("input",{required:!0,type:"text",id:"firstname"}),e("label",{htmlFor:"lastname",children:"last name"}),e("input",{required:!0,type:"text",id:"lastname"}),e("label",{htmlFor:"country",children:"country"}),h("select",{id:"country",name:"country",children:[e("option",{children:"select country"}),e("option",{value:"AF",children:"Afghanistan"}),e("option",{value:"AX",children:"Aland Islands"}),e("option",{value:"AL",children:"Albania"}),e("option",{value:"DZ",children:"Algeria"}),e("option",{value:"AS",children:"American Samoa"}),e("option",{value:"AD",children:"Andorra"}),e("option",{value:"AO",children:"Angola"}),e("option",{value:"AI",children:"Anguilla"}),e("option",{value:"AQ",children:"Antarctica"}),e("option",{value:"AG",children:"Antigua and Barbuda"}),e("option",{value:"AR",children:"Argentina"}),e("option",{value:"AM",children:"Armenia"}),e("option",{value:"AW",children:"Aruba"}),e("option",{value:"AU",children:"Australia"}),e("option",{value:"AT",children:"Austria"}),e("option",{value:"AZ",children:"Azerbaijan"}),e("option",{value:"BS",children:"Bahamas"}),e("option",{value:"BH",children:"Bahrain"}),e("option",{value:"BD",children:"Bangladesh"}),e("option",{value:"BB",children:"Barbados"}),e("option",{value:"BY",children:"Belarus"}),e("option",{value:"BE",children:"Belgium"}),e("option",{value:"BZ",children:"Belize"}),e("option",{value:"BJ",children:"Benin"}),e("option",{value:"BM",children:"Bermuda"}),e("option",{value:"BT",children:"Bhutan"}),e("option",{value:"BO",children:"Bolivia"}),e("option",{value:"BQ",children:"Bonaire, Sint Eustatius and Saba"}),e("option",{value:"BA",children:"Bosnia and Herzegovina"}),e("option",{value:"BW",children:"Botswana"}),e("option",{value:"BV",children:"Bouvet Island"}),e("option",{value:"BR",children:"Brazil"}),e("option",{value:"IO",children:"British Indian Ocean Territory"}),e("option",{value:"BN",children:"Brunei Darussalam"}),e("option",{value:"BG",children:"Bulgaria"}),e("option",{value:"BF",children:"Burkina Faso"}),e("option",{value:"BI",children:"Burundi"}),e("option",{value:"KH",children:"Cambodia"}),e("option",{value:"CM",children:"Cameroon"}),e("option",{value:"CA",children:"Canada"}),e("option",{value:"CV",children:"Cape Verde"}),e("option",{value:"KY",children:"Cayman Islands"}),e("option",{value:"CF",children:"Central African Republic"}),e("option",{value:"TD",children:"Chad"}),e("option",{value:"CL",children:"Chile"}),e("option",{value:"CN",children:"China"}),e("option",{value:"CX",children:"Christmas Island"}),e("option",{value:"CC",children:"Cocos (Keeling) Islands"}),e("option",{value:"CO",children:"Colombia"}),e("option",{value:"KM",children:"Comoros"}),e("option",{value:"CG",children:"Congo"}),e("option",{value:"CD",children:"Congo, Democratic Republic of the Congo"}),e("option",{value:"CK",children:"Cook Islands"}),e("option",{value:"CR",children:"Costa Rica"}),e("option",{value:"CI",children:"Cote D'Ivoire"}),e("option",{value:"HR",children:"Croatia"}),e("option",{value:"CU",children:"Cuba"}),e("option",{value:"CW",children:"Curacao"}),e("option",{value:"CY",children:"Cyprus"}),e("option",{value:"CZ",children:"Czech Republic"}),e("option",{value:"DK",children:"Denmark"}),e("option",{value:"DJ",children:"Djibouti"}),e("option",{value:"DM",children:"Dominica"}),e("option",{value:"DO",children:"Dominican Republic"}),e("option",{value:"EC",children:"Ecuador"}),e("option",{value:"EG",children:"Egypt"}),e("option",{value:"SV",children:"El Salvador"}),e("option",{value:"GQ",children:"Equatorial Guinea"}),e("option",{value:"ER",children:"Eritrea"}),e("option",{value:"EE",children:"Estonia"}),e("option",{value:"ET",children:"Ethiopia"}),e("option",{value:"FK",children:"Falkland Islands (Malvinas)"}),e("option",{value:"FO",children:"Faroe Islands"}),e("option",{value:"FJ",children:"Fiji"}),e("option",{value:"FI",children:"Finland"}),e("option",{value:"FR",children:"France"}),e("option",{value:"GF",children:"French Guiana"}),e("option",{value:"PF",children:"French Polynesia"}),e("option",{value:"TF",children:"French Southern Territories"}),e("option",{value:"GA",children:"Gabon"}),e("option",{value:"GM",children:"Gambia"}),e("option",{value:"GE",children:"Georgia"}),e("option",{value:"DE",children:"Germany"}),e("option",{value:"GH",children:"Ghana"}),e("option",{value:"GI",children:"Gibraltar"}),e("option",{value:"GR",children:"Greece"}),e("option",{value:"GL",children:"Greenland"}),e("option",{value:"GD",children:"Grenada"}),e("option",{value:"GP",children:"Guadeloupe"}),e("option",{value:"GU",children:"Guam"}),e("option",{value:"GT",children:"Guatemala"}),e("option",{value:"GG",children:"Guernsey"}),e("option",{value:"GN",children:"Guinea"}),e("option",{value:"GW",children:"Guinea-Bissau"}),e("option",{value:"GY",children:"Guyana"}),e("option",{value:"HT",children:"Haiti"}),e("option",{value:"HM",children:"Heard Island and Mcdonald Islands"}),e("option",{value:"VA",children:"Holy See (Vatican City State)"}),e("option",{value:"HN",children:"Honduras"}),e("option",{value:"HK",children:"Hong Kong"}),e("option",{value:"HU",children:"Hungary"}),e("option",{value:"IS",children:"Iceland"}),e("option",{value:"IN",children:"India"}),e("option",{value:"ID",children:"Indonesia"}),e("option",{value:"IR",children:"Iran, Islamic Republic of"}),e("option",{value:"IQ",children:"Iraq"}),e("option",{value:"IE",children:"Ireland"}),e("option",{value:"IM",children:"Isle of Man"}),e("option",{value:"IL",children:"Israel"}),e("option",{value:"IT",children:"Italy"}),e("option",{value:"JM",children:"Jamaica"}),e("option",{value:"JP",children:"Japan"}),e("option",{value:"JE",children:"Jersey"}),e("option",{value:"JO",children:"Jordan"}),e("option",{value:"KZ",children:"Kazakhstan"}),e("option",{value:"KE",children:"Kenya"}),e("option",{value:"KI",children:"Kiribati"}),e("option",{value:"KP",children:"Korea, Democratic People's Republic of"}),e("option",{value:"KR",children:"Korea, Republic of"}),e("option",{value:"XK",children:"Kosovo"}),e("option",{value:"KW",children:"Kuwait"}),e("option",{value:"KG",children:"Kyrgyzstan"}),e("option",{value:"LA",children:"Lao People's Democratic Republic"}),e("option",{value:"LV",children:"Latvia"}),e("option",{value:"LB",children:"Lebanon"}),e("option",{value:"LS",children:"Lesotho"}),e("option",{value:"LR",children:"Liberia"}),e("option",{value:"LY",children:"Libyan Arab Jamahiriya"}),e("option",{value:"LI",children:"Liechtenstein"}),e("option",{value:"LT",children:"Lithuania"}),e("option",{value:"LU",children:"Luxembourg"}),e("option",{value:"MO",children:"Macao"}),e("option",{value:"MK",children:"Macedonia, the Former Yugoslav Republic of"}),e("option",{value:"MG",children:"Madagascar"}),e("option",{value:"MW",children:"Malawi"}),e("option",{value:"MY",children:"Malaysia"}),e("option",{value:"MV",children:"Maldives"}),e("option",{value:"ML",children:"Mali"}),e("option",{value:"MT",children:"Malta"}),e("option",{value:"MH",children:"Marshall Islands"}),e("option",{value:"MQ",children:"Martinique"}),e("option",{value:"MR",children:"Mauritania"}),e("option",{value:"MU",children:"Mauritius"}),e("option",{value:"YT",children:"Mayotte"}),e("option",{value:"MX",children:"Mexico"}),e("option",{value:"FM",children:"Micronesia, Federated States of"}),e("option",{value:"MD",children:"Moldova, Republic of"}),e("option",{value:"MC",children:"Monaco"}),e("option",{value:"MN",children:"Mongolia"}),e("option",{value:"ME",children:"Montenegro"}),e("option",{value:"MS",children:"Montserrat"}),e("option",{value:"MA",children:"Morocco"}),e("option",{value:"MZ",children:"Mozambique"}),e("option",{value:"MM",children:"Myanmar"}),e("option",{value:"NA",children:"Namibia"}),e("option",{value:"NR",children:"Nauru"}),e("option",{value:"NP",children:"Nepal"}),e("option",{value:"NL",children:"Netherlands"}),e("option",{value:"AN",children:"Netherlands Antilles"}),e("option",{value:"NC",children:"New Caledonia"}),e("option",{value:"NZ",children:"New Zealand"}),e("option",{value:"NI",children:"Nicaragua"}),e("option",{value:"NE",children:"Niger"}),e("option",{value:"NG",children:"Nigeria"}),e("option",{value:"NU",children:"Niue"}),e("option",{value:"NF",children:"Norfolk Island"}),e("option",{value:"MP",children:"Northern Mariana Islands"}),e("option",{value:"NO",children:"Norway"}),e("option",{value:"OM",children:"Oman"}),e("option",{value:"PK",children:"Pakistan"}),e("option",{value:"PW",children:"Palau"}),e("option",{value:"PS",children:"Palestinian Territory, Occupied"}),e("option",{value:"PA",children:"Panama"}),e("option",{value:"PG",children:"Papua New Guinea"}),e("option",{value:"PY",children:"Paraguay"}),e("option",{value:"PE",children:"Peru"}),e("option",{value:"PH",children:"Philippines"}),e("option",{value:"PN",children:"Pitcairn"}),e("option",{value:"PL",children:"Poland"}),e("option",{value:"PT",children:"Portugal"}),e("option",{value:"PR",children:"Puerto Rico"}),e("option",{value:"QA",children:"Qatar"}),e("option",{value:"RE",children:"Reunion"}),e("option",{value:"RO",children:"Romania"}),e("option",{value:"RU",children:"Russian Federation"}),e("option",{value:"RW",children:"Rwanda"}),e("option",{value:"BL",children:"Saint Barthelemy"}),e("option",{value:"SH",children:"Saint Helena"}),e("option",{value:"KN",children:"Saint Kitts and Nevis"}),e("option",{value:"LC",children:"Saint Lucia"}),e("option",{value:"MF",children:"Saint Martin"}),e("option",{value:"PM",children:"Saint Pierre and Miquelon"}),e("option",{value:"VC",children:"Saint Vincent and the Grenadines"}),e("option",{value:"WS",children:"Samoa"}),e("option",{value:"SM",children:"San Marino"}),e("option",{value:"ST",children:"Sao Tome and Principe"}),e("option",{value:"SA",children:"Saudi Arabia"}),e("option",{value:"SN",children:"Senegal"}),e("option",{value:"RS",children:"Serbia"}),e("option",{value:"CS",children:"Serbia and Montenegro"}),e("option",{value:"SC",children:"Seychelles"}),e("option",{value:"SL",children:"Sierra Leone"}),e("option",{value:"SG",children:"Singapore"}),e("option",{value:"SX",children:"Sint Maarten"}),e("option",{value:"SK",children:"Slovakia"}),e("option",{value:"SI",children:"Slovenia"}),e("option",{value:"SB",children:"Solomon Islands"}),e("option",{value:"SO",children:"Somalia"}),e("option",{value:"ZA",children:"South Africa"}),e("option",{value:"GS",children:"South Georgia and the South Sandwich Islands"}),e("option",{value:"SS",children:"South Sudan"}),e("option",{value:"ES",children:"Spain"}),e("option",{value:"LK",children:"Sri Lanka"}),e("option",{value:"SD",children:"Sudan"}),e("option",{value:"SR",children:"Suriname"}),e("option",{value:"SJ",children:"Svalbard and Jan Mayen"}),e("option",{value:"SZ",children:"Swaziland"}),e("option",{value:"SE",children:"Sweden"}),e("option",{value:"CH",children:"Switzerland"}),e("option",{value:"TW",children:"Taiwan, Province of China"}),e("option",{value:"TJ",children:"Tajikistan"}),e("option",{value:"TZ",children:"Tanzania, United Republic of"}),e("option",{value:"TH",children:"Thailand"}),e("option",{value:"TL",children:"Timor-Leste"}),e("option",{value:"TG",children:"Togo"}),e("option",{value:"TK",children:"Tokelau"}),e("option",{value:"TO",children:"Tonga"}),e("option",{value:"TT",children:"Trinidad and Tobago"}),e("option",{value:"TN",children:"Tunisia"}),e("option",{value:"TR",children:"Turkey"}),e("option",{value:"TM",children:"Turkmenistan"}),e("option",{value:"TC",children:"Turks and Caicos Islands"}),e("option",{value:"TV",children:"Tuvalu"}),e("option",{value:"UG",children:"Uganda"}),e("option",{value:"UA",children:"Ukraine"}),e("option",{value:"AE",children:"United Arab Emirates"}),e("option",{value:"GB",children:"United Kingdom"}),e("option",{value:"US",children:"United States"}),e("option",{value:"UM",children:"United States Minor Outlying Islands"}),e("option",{value:"UY",children:"Uruguay"}),e("option",{value:"UZ",children:"Uzbekistan"}),e("option",{value:"VU",children:"Vanuatu"}),e("option",{value:"VE",children:"Venezuela"}),e("option",{value:"VN",children:"Viet Nam"}),e("option",{value:"VG",children:"Virgin Islands, British"}),e("option",{value:"VI",children:"Virgin Islands, U.s."}),e("option",{value:"WF",children:"Wallis and Futuna"}),e("option",{value:"EH",children:"Western Sahara"}),e("option",{value:"YE",children:"Yemen"}),e("option",{value:"ZM",children:"Zambia"}),e("option",{value:"ZW",children:"Zimbabwe"})]}),e("label",{htmlFor:"zipcode",children:"zipcode"}),e("input",{required:!0,type:"number",id:"zipcode"}),e("label",{htmlFor:"state",children:"state"}),e("input",{required:!0,type:"text",id:"state"}),e("label",{htmlFor:"city",children:"city"}),e("input",{required:!0,type:"text",id:"city"}),e("label",{htmlFor:"street",children:"street"}),e("input",{required:!0,type:"text",id:"street"}),e("button",{children:"Add address"})]})},X=Q;function oe(){const{categories:y,products:s}=j(),{currentUser:v}=Y(),{setQuanitiyDb:g,removeCartProduct:I,getCartProducts:N,checkout:G,getAddress:B}=E(),[f,m]=p.useState(),[a,P]=p.useState(),[l,F]=p.useState([]),[L,C]=p.useState(0),[K,D]=p.useState(),R=O(),k=()=>{C(()=>l.reduce((n,i)=>{var r,d;return((r=i[0])==null?void 0:r.price)===void 0?0:parseFloat(n)+parseFloat((d=i[0])==null?void 0:d.price)*parseFloat(i[2])},0))};p.useEffect(()=>{async function n(){if(v===null)return R("/login"),F(null);v.emailVerified||R("/notverified");const i=await N();F(i.map(r=>{const d=r.directory.slice(0,20),b=r.directory.slice(21),{options:A}=r,S={...s.find(M=>M.category.id===d&&parseInt(M.id)===parseInt(b))};return S.options=A,[S,d,parseInt(r.quantity)]})),l.length===0&&m(!1)}n()},[y,v]),p.useEffect(()=>{function n(){l[0]!==void 0&&(m(!0),P(()=>l==null?void 0:l.map(i=>i==null?void 0:i[2])),k(),m(!1))}n()},[l]);const U=l==null?void 0:l.map((n,i)=>{var r,d,b,A,S,M;return n[0]===void 0?e(w,{}):h("div",{className:"product-cart-card flex align-ce gap-1",children:[e("img",{src:(d=(r=n[0])==null?void 0:r.photos)==null?void 0:d[0],alt:""}),e("span",{children:`${(b=n[0])==null?void 0:b.title} ${[...Object.keys(n[0].options)].map(c=>`${c}: ${n[0].options[c]}`)}`}),h("span",{className:"flex gap-1 align-ce justify-ce",children:[e("button",{onClick:()=>{var c;C(t=>{var o;return parseFloat(t)+parseFloat((o=n[0])==null?void 0:o.price)}),P(t=>t==null?void 0:t.map((o,u)=>u===i?o+1:o)),g((a==null?void 0:a[i])+1,`${n[1]}-${(c=n[0])==null?void 0:c.id}`)},className:"counter-btn flex align-ce justify-ce",children:e(T,{icon:Z})}),a==null?void 0:a[i],e("button",{onClick:c=>{var t;(a==null?void 0:a[i])!==1&&(C(o=>{var u;return parseFloat(o)-parseFloat((u=n[0])==null?void 0:u.price)}),P(o=>o.map((u,V)=>V===i?u-1:u)),g((a==null?void 0:a[i])-1,`${n[1]}-${(t=n[0])==null?void 0:t.id}`))},className:"counter-btn flex align-ce justify-ce",children:e(T,{icon:J})})]}),e(z,{to:`/product/${n[1]}-${(A=n[0])==null?void 0:A.id}`,className:"view-link",children:"view"}),h("span",{className:"price",children:["Price: ",(S=n[0])==null?void 0:S.price," $"]}),e("button",{className:"btn-remove pointer",onClick:()=>{var c;F(t=>t.filter(o=>{var u;return`${o[1]}-${o[0].id}`!=`${n[1]}-${(u=n[0])==null?void 0:u.id}`})),C(t=>{var o;return parseFloat(t)-parseFloat((o=n[0])==null?void 0:o.price)*parseFloat(a==null?void 0:a[i])}),I(`${n[1]}-${(c=n[0])==null?void 0:c.id}`)},children:e(T,{icon:W})})]},`${n[1]}-${(M=n[0])==null?void 0:M.id}`)});function H(){return l.map((n,i)=>{const{options:r}=n[0];return{id:`${n[1]}-${n[0].id}`,quantity:a[i],options:r}})}async function $(){const n=H();if((await B()).length===0)return D(!0);G(n)}return!f&&(l==null?void 0:l.length)===0?e("div",{className:"container",children:e(x,{products:[],title:" No product has been added"})}):h("div",{className:"cart-container container flex flex-direc align-ce gap-2",children:[U,K&&e(X,{}),h("div",{className:"buy-details",children:[h("div",{className:"sub-total-price",children:["Subtotal : ",L," $"]}),e("button",{className:"btn-buy",onClick:$,children:"Check Out"})]})]})}export{oe as default};
