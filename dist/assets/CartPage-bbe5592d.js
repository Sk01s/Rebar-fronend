import{r as p,a as s,j as e,u as J,F as Z,L as W}from"./index-f7c5f2e7.js";import{F as T,k as Y,l as j,m as x}from"./index-b3c681c3.js";import{a as E,u as Q}from"./SetOutFucntions-f088c140.js";import{useCategories as X}from"./CategoiresContext-e0e81007.js";import{D as q}from"./Gallary-33fc2a3d.js";import"./firebase-config-409fc865.js";const _=A=>{const{addAddress:b}=E(),g=p.useRef();return s("form",{className:"address-popup",onSubmit:M=>{M.target.remove()},ref:g,children:[e("label",{htmlFor:"firstname",children:"first name"}),e("input",{required:!0,type:"text",id:"firstname"}),e("label",{htmlFor:"lastname",children:"last name"}),e("input",{required:!0,type:"text",id:"lastname"}),e("label",{htmlFor:"country",children:"country"}),s("select",{id:"country",name:"country",children:[e("option",{children:"select country"}),e("option",{value:"AF",children:"Afghanistan"}),e("option",{value:"AX",children:"Aland Islands"}),e("option",{value:"AL",children:"Albania"}),e("option",{value:"DZ",children:"Algeria"}),e("option",{value:"AS",children:"American Samoa"}),e("option",{value:"AD",children:"Andorra"}),e("option",{value:"AO",children:"Angola"}),e("option",{value:"AI",children:"Anguilla"}),e("option",{value:"AQ",children:"Antarctica"}),e("option",{value:"AG",children:"Antigua and Barbuda"}),e("option",{value:"AR",children:"Argentina"}),e("option",{value:"AM",children:"Armenia"}),e("option",{value:"AW",children:"Aruba"}),e("option",{value:"AU",children:"Australia"}),e("option",{value:"AT",children:"Austria"}),e("option",{value:"AZ",children:"Azerbaijan"}),e("option",{value:"BS",children:"Bahamas"}),e("option",{value:"BH",children:"Bahrain"}),e("option",{value:"BD",children:"Bangladesh"}),e("option",{value:"BB",children:"Barbados"}),e("option",{value:"BY",children:"Belarus"}),e("option",{value:"BE",children:"Belgium"}),e("option",{value:"BZ",children:"Belize"}),e("option",{value:"BJ",children:"Benin"}),e("option",{value:"BM",children:"Bermuda"}),e("option",{value:"BT",children:"Bhutan"}),e("option",{value:"BO",children:"Bolivia"}),e("option",{value:"BQ",children:"Bonaire, Sint Eustatius and Saba"}),e("option",{value:"BA",children:"Bosnia and Herzegovina"}),e("option",{value:"BW",children:"Botswana"}),e("option",{value:"BV",children:"Bouvet Island"}),e("option",{value:"BR",children:"Brazil"}),e("option",{value:"IO",children:"British Indian Ocean Territory"}),e("option",{value:"BN",children:"Brunei Darussalam"}),e("option",{value:"BG",children:"Bulgaria"}),e("option",{value:"BF",children:"Burkina Faso"}),e("option",{value:"BI",children:"Burundi"}),e("option",{value:"KH",children:"Cambodia"}),e("option",{value:"CM",children:"Cameroon"}),e("option",{value:"CA",children:"Canada"}),e("option",{value:"CV",children:"Cape Verde"}),e("option",{value:"KY",children:"Cayman Islands"}),e("option",{value:"CF",children:"Central African Republic"}),e("option",{value:"TD",children:"Chad"}),e("option",{value:"CL",children:"Chile"}),e("option",{value:"CN",children:"China"}),e("option",{value:"CX",children:"Christmas Island"}),e("option",{value:"CC",children:"Cocos (Keeling) Islands"}),e("option",{value:"CO",children:"Colombia"}),e("option",{value:"KM",children:"Comoros"}),e("option",{value:"CG",children:"Congo"}),e("option",{value:"CD",children:"Congo, Democratic Republic of the Congo"}),e("option",{value:"CK",children:"Cook Islands"}),e("option",{value:"CR",children:"Costa Rica"}),e("option",{value:"CI",children:"Cote D'Ivoire"}),e("option",{value:"HR",children:"Croatia"}),e("option",{value:"CU",children:"Cuba"}),e("option",{value:"CW",children:"Curacao"}),e("option",{value:"CY",children:"Cyprus"}),e("option",{value:"CZ",children:"Czech Republic"}),e("option",{value:"DK",children:"Denmark"}),e("option",{value:"DJ",children:"Djibouti"}),e("option",{value:"DM",children:"Dominica"}),e("option",{value:"DO",children:"Dominican Republic"}),e("option",{value:"EC",children:"Ecuador"}),e("option",{value:"EG",children:"Egypt"}),e("option",{value:"SV",children:"El Salvador"}),e("option",{value:"GQ",children:"Equatorial Guinea"}),e("option",{value:"ER",children:"Eritrea"}),e("option",{value:"EE",children:"Estonia"}),e("option",{value:"ET",children:"Ethiopia"}),e("option",{value:"FK",children:"Falkland Islands (Malvinas)"}),e("option",{value:"FO",children:"Faroe Islands"}),e("option",{value:"FJ",children:"Fiji"}),e("option",{value:"FI",children:"Finland"}),e("option",{value:"FR",children:"France"}),e("option",{value:"GF",children:"French Guiana"}),e("option",{value:"PF",children:"French Polynesia"}),e("option",{value:"TF",children:"French Southern Territories"}),e("option",{value:"GA",children:"Gabon"}),e("option",{value:"GM",children:"Gambia"}),e("option",{value:"GE",children:"Georgia"}),e("option",{value:"DE",children:"Germany"}),e("option",{value:"GH",children:"Ghana"}),e("option",{value:"GI",children:"Gibraltar"}),e("option",{value:"GR",children:"Greece"}),e("option",{value:"GL",children:"Greenland"}),e("option",{value:"GD",children:"Grenada"}),e("option",{value:"GP",children:"Guadeloupe"}),e("option",{value:"GU",children:"Guam"}),e("option",{value:"GT",children:"Guatemala"}),e("option",{value:"GG",children:"Guernsey"}),e("option",{value:"GN",children:"Guinea"}),e("option",{value:"GW",children:"Guinea-Bissau"}),e("option",{value:"GY",children:"Guyana"}),e("option",{value:"HT",children:"Haiti"}),e("option",{value:"HM",children:"Heard Island and Mcdonald Islands"}),e("option",{value:"VA",children:"Holy See (Vatican City State)"}),e("option",{value:"HN",children:"Honduras"}),e("option",{value:"HK",children:"Hong Kong"}),e("option",{value:"HU",children:"Hungary"}),e("option",{value:"IS",children:"Iceland"}),e("option",{value:"IN",children:"India"}),e("option",{value:"ID",children:"Indonesia"}),e("option",{value:"IR",children:"Iran, Islamic Republic of"}),e("option",{value:"IQ",children:"Iraq"}),e("option",{value:"IE",children:"Ireland"}),e("option",{value:"IM",children:"Isle of Man"}),e("option",{value:"IL",children:"Israel"}),e("option",{value:"IT",children:"Italy"}),e("option",{value:"JM",children:"Jamaica"}),e("option",{value:"JP",children:"Japan"}),e("option",{value:"JE",children:"Jersey"}),e("option",{value:"JO",children:"Jordan"}),e("option",{value:"KZ",children:"Kazakhstan"}),e("option",{value:"KE",children:"Kenya"}),e("option",{value:"KI",children:"Kiribati"}),e("option",{value:"KP",children:"Korea, Democratic People's Republic of"}),e("option",{value:"KR",children:"Korea, Republic of"}),e("option",{value:"XK",children:"Kosovo"}),e("option",{value:"KW",children:"Kuwait"}),e("option",{value:"KG",children:"Kyrgyzstan"}),e("option",{value:"LA",children:"Lao People's Democratic Republic"}),e("option",{value:"LV",children:"Latvia"}),e("option",{value:"LB",children:"Lebanon"}),e("option",{value:"LS",children:"Lesotho"}),e("option",{value:"LR",children:"Liberia"}),e("option",{value:"LY",children:"Libyan Arab Jamahiriya"}),e("option",{value:"LI",children:"Liechtenstein"}),e("option",{value:"LT",children:"Lithuania"}),e("option",{value:"LU",children:"Luxembourg"}),e("option",{value:"MO",children:"Macao"}),e("option",{value:"MK",children:"Macedonia, the Former Yugoslav Republic of"}),e("option",{value:"MG",children:"Madagascar"}),e("option",{value:"MW",children:"Malawi"}),e("option",{value:"MY",children:"Malaysia"}),e("option",{value:"MV",children:"Maldives"}),e("option",{value:"ML",children:"Mali"}),e("option",{value:"MT",children:"Malta"}),e("option",{value:"MH",children:"Marshall Islands"}),e("option",{value:"MQ",children:"Martinique"}),e("option",{value:"MR",children:"Mauritania"}),e("option",{value:"MU",children:"Mauritius"}),e("option",{value:"YT",children:"Mayotte"}),e("option",{value:"MX",children:"Mexico"}),e("option",{value:"FM",children:"Micronesia, Federated States of"}),e("option",{value:"MD",children:"Moldova, Republic of"}),e("option",{value:"MC",children:"Monaco"}),e("option",{value:"MN",children:"Mongolia"}),e("option",{value:"ME",children:"Montenegro"}),e("option",{value:"MS",children:"Montserrat"}),e("option",{value:"MA",children:"Morocco"}),e("option",{value:"MZ",children:"Mozambique"}),e("option",{value:"MM",children:"Myanmar"}),e("option",{value:"NA",children:"Namibia"}),e("option",{value:"NR",children:"Nauru"}),e("option",{value:"NP",children:"Nepal"}),e("option",{value:"NL",children:"Netherlands"}),e("option",{value:"AN",children:"Netherlands Antilles"}),e("option",{value:"NC",children:"New Caledonia"}),e("option",{value:"NZ",children:"New Zealand"}),e("option",{value:"NI",children:"Nicaragua"}),e("option",{value:"NE",children:"Niger"}),e("option",{value:"NG",children:"Nigeria"}),e("option",{value:"NU",children:"Niue"}),e("option",{value:"NF",children:"Norfolk Island"}),e("option",{value:"MP",children:"Northern Mariana Islands"}),e("option",{value:"NO",children:"Norway"}),e("option",{value:"OM",children:"Oman"}),e("option",{value:"PK",children:"Pakistan"}),e("option",{value:"PW",children:"Palau"}),e("option",{value:"PS",children:"Palestinian Territory, Occupied"}),e("option",{value:"PA",children:"Panama"}),e("option",{value:"PG",children:"Papua New Guinea"}),e("option",{value:"PY",children:"Paraguay"}),e("option",{value:"PE",children:"Peru"}),e("option",{value:"PH",children:"Philippines"}),e("option",{value:"PN",children:"Pitcairn"}),e("option",{value:"PL",children:"Poland"}),e("option",{value:"PT",children:"Portugal"}),e("option",{value:"PR",children:"Puerto Rico"}),e("option",{value:"QA",children:"Qatar"}),e("option",{value:"RE",children:"Reunion"}),e("option",{value:"RO",children:"Romania"}),e("option",{value:"RU",children:"Russian Federation"}),e("option",{value:"RW",children:"Rwanda"}),e("option",{value:"BL",children:"Saint Barthelemy"}),e("option",{value:"SH",children:"Saint Helena"}),e("option",{value:"KN",children:"Saint Kitts and Nevis"}),e("option",{value:"LC",children:"Saint Lucia"}),e("option",{value:"MF",children:"Saint Martin"}),e("option",{value:"PM",children:"Saint Pierre and Miquelon"}),e("option",{value:"VC",children:"Saint Vincent and the Grenadines"}),e("option",{value:"WS",children:"Samoa"}),e("option",{value:"SM",children:"San Marino"}),e("option",{value:"ST",children:"Sao Tome and Principe"}),e("option",{value:"SA",children:"Saudi Arabia"}),e("option",{value:"SN",children:"Senegal"}),e("option",{value:"RS",children:"Serbia"}),e("option",{value:"CS",children:"Serbia and Montenegro"}),e("option",{value:"SC",children:"Seychelles"}),e("option",{value:"SL",children:"Sierra Leone"}),e("option",{value:"SG",children:"Singapore"}),e("option",{value:"SX",children:"Sint Maarten"}),e("option",{value:"SK",children:"Slovakia"}),e("option",{value:"SI",children:"Slovenia"}),e("option",{value:"SB",children:"Solomon Islands"}),e("option",{value:"SO",children:"Somalia"}),e("option",{value:"ZA",children:"South Africa"}),e("option",{value:"GS",children:"South Georgia and the South Sandwich Islands"}),e("option",{value:"SS",children:"South Sudan"}),e("option",{value:"ES",children:"Spain"}),e("option",{value:"LK",children:"Sri Lanka"}),e("option",{value:"SD",children:"Sudan"}),e("option",{value:"SR",children:"Suriname"}),e("option",{value:"SJ",children:"Svalbard and Jan Mayen"}),e("option",{value:"SZ",children:"Swaziland"}),e("option",{value:"SE",children:"Sweden"}),e("option",{value:"CH",children:"Switzerland"}),e("option",{value:"TW",children:"Taiwan, Province of China"}),e("option",{value:"TJ",children:"Tajikistan"}),e("option",{value:"TZ",children:"Tanzania, United Republic of"}),e("option",{value:"TH",children:"Thailand"}),e("option",{value:"TL",children:"Timor-Leste"}),e("option",{value:"TG",children:"Togo"}),e("option",{value:"TK",children:"Tokelau"}),e("option",{value:"TO",children:"Tonga"}),e("option",{value:"TT",children:"Trinidad and Tobago"}),e("option",{value:"TN",children:"Tunisia"}),e("option",{value:"TR",children:"Turkey"}),e("option",{value:"TM",children:"Turkmenistan"}),e("option",{value:"TC",children:"Turks and Caicos Islands"}),e("option",{value:"TV",children:"Tuvalu"}),e("option",{value:"UG",children:"Uganda"}),e("option",{value:"UA",children:"Ukraine"}),e("option",{value:"AE",children:"United Arab Emirates"}),e("option",{value:"GB",children:"United Kingdom"}),e("option",{value:"US",children:"United States"}),e("option",{value:"UM",children:"United States Minor Outlying Islands"}),e("option",{value:"UY",children:"Uruguay"}),e("option",{value:"UZ",children:"Uzbekistan"}),e("option",{value:"VU",children:"Vanuatu"}),e("option",{value:"VE",children:"Venezuela"}),e("option",{value:"VN",children:"Viet Nam"}),e("option",{value:"VG",children:"Virgin Islands, British"}),e("option",{value:"VI",children:"Virgin Islands, U.s."}),e("option",{value:"WF",children:"Wallis and Futuna"}),e("option",{value:"EH",children:"Western Sahara"}),e("option",{value:"YE",children:"Yemen"}),e("option",{value:"ZM",children:"Zambia"}),e("option",{value:"ZW",children:"Zimbabwe"})]}),e("label",{htmlFor:"zipcode",children:"zipcode"}),e("input",{required:!0,type:"number",id:"zipcode"}),e("label",{htmlFor:"state",children:"state"}),e("input",{required:!0,type:"text",id:"state"}),e("label",{htmlFor:"city",children:"city"}),e("input",{required:!0,type:"text",id:"city"}),e("label",{htmlFor:"street",children:"street"}),e("input",{required:!0,type:"text",id:"street"}),e("button",{onClick:()=>{const{firstname:M,lastname:N,zipcode:G,state:P,city:B,street:f,country:a}=g.current,C={firstname:M.value,lastname:N.value,zipcode:G.value,state:P.value,city:B.value,street:f.value,country:a.options[a.selectedIndex].innerText};b(C)},children:"Add address"})]})},ee=_,ne=({addressArray:A})=>e("div",{children:JSON.stringify(A)}),ie=ne;function de(){const{categories:A,products:b}=X(),{currentUser:g}=Q(),{setQuanitiyDb:y,removeCartProduct:M,getCartProducts:N,checkout:G,getAddress:P}=E(),[B,f]=p.useState(),[a,C]=p.useState(),[l,F]=p.useState([]),[L,I]=p.useState(0),[K,k]=p.useState(()=>!1),[D,U]=p.useState(()=>!1);J();const[R,H]=p.useState([]),O=()=>{I(()=>l.reduce((n,i)=>{var t,r;return((t=i[0])==null?void 0:t.price)===void 0?0:parseFloat(n)+parseFloat((r=i[0])==null?void 0:r.price)*parseFloat(i[2])},0))};p.useEffect(()=>{async function n(){if(g===null){const t=JSON.parse(localStorage.getItem("cart"));return F(t.map(r=>{const v=r.directory.slice(0,20),S=r.directory.slice(21),{options:m}=r,h={...b.find(c=>c.category.id===v&&parseInt(c.id)===parseInt(S))};return h.options=m,[h,v,parseInt(r.quantity)]}))}const i=await N();F(i.map(t=>{const r=t.directory.slice(0,20),v=t.directory.slice(21),{options:S}=t,m={...b.find(h=>h.category.id===r&&parseInt(h.id)===parseInt(v))};return m.options=S,[m,r,parseInt(t.quantity)]})),l.length===0&&f(!1)}n()},[A,g]),p.useEffect(()=>{function n(){l[0]!==void 0&&(f(!0),C(()=>l==null?void 0:l.map(i=>i==null?void 0:i[2])),O(),f(!1))}n()},[l]);const $=l==null?void 0:l.map((n,i)=>{var t,r,v,S,m,h;return n[0]===void 0?e(Z,{}):s("div",{className:"product-cart-card flex align-ce gap-1",children:[e("img",{src:(r=(t=n[0])==null?void 0:t.photos)==null?void 0:r[0],alt:""}),e("span",{children:`${(v=n[0])==null?void 0:v.title} ${[...Object.keys(n[0].options)].map(c=>`${c}: ${n[0].options[c]}`)}`}),s("span",{className:"flex gap-1 align-ce justify-ce",children:[e("button",{onClick:()=>{var c;I(d=>{var o;return parseFloat(d)+parseFloat((o=n[0])==null?void 0:o.price)}),C(d=>d==null?void 0:d.map((o,u)=>u===i?o+1:o)),y((a==null?void 0:a[i])+1,`${n[1]}-${(c=n[0])==null?void 0:c.id}`)},className:"counter-btn flex align-ce justify-ce",children:e(T,{icon:Y})}),a==null?void 0:a[i],e("button",{onClick:c=>{var d;(a==null?void 0:a[i])!==1&&(I(o=>{var u;return parseFloat(o)-parseFloat((u=n[0])==null?void 0:u.price)}),C(o=>o.map((u,z)=>z===i?u-1:u)),y((a==null?void 0:a[i])-1,`${n[1]}-${(d=n[0])==null?void 0:d.id}`))},className:"counter-btn flex align-ce justify-ce",children:e(T,{icon:j})})]}),e(W,{to:`/product/${n[1]}-${(S=n[0])==null?void 0:S.id}`,className:"view-link",children:"view"}),s("span",{className:"price",children:["Price: ",(m=n[0])==null?void 0:m.price," $"]}),e("button",{className:"btn-remove pointer",onClick:()=>{var c;F(d=>d.filter(o=>{var u;return`${o[1]}-${o[0].id}`!=`${n[1]}-${(u=n[0])==null?void 0:u.id}`})),I(d=>{var o;return parseFloat(d)-parseFloat((o=n[0])==null?void 0:o.price)*parseFloat(a==null?void 0:a[i])}),M(`${n[1]}-${(c=n[0])==null?void 0:c.id}`)},children:e(T,{icon:x})})]},`${n[1]}-${(h=n[0])==null?void 0:h.id}`)});function V(){return l.map((n,i)=>{const{options:t}=n[0];return{id:`${n[1]}-${n[0].id}`,quantity:a[i],options:t}})}async function w(){const n=V(),i=await P();if(H(i),R.length===0)return console.log("oppening"),k(!0);U(!0),G(n)}return!B&&(l==null?void 0:l.length)===0?e("div",{className:"container",children:e(q,{products:[],title:" No product has been added"})}):s("div",{className:"cart-container container flex flex-direc align-ce gap-2",children:[$,K&&e(ee,{}),D&&e(ie,{addressArray:R}),s("div",{className:"buy-details",children:[s("div",{className:"sub-total-price",children:["Subtotal : ",L," $"]}),e("button",{className:"btn-buy",onClick:w,children:"Check Out"})]})]})}export{de as default};
