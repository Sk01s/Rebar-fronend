import{a as d,j as e,r as h,u as O,F as $,L as w}from"./index-34aaf63e.js";import{M as T}from"./index-d8fb095e.js";import{a as R,u as z}from"./SetOutFucntions-c0e8fae2.js";import{useCategories as Z}from"./CategoiresContext-a3c24581.js";import{D as J}from"./Gallary-fd3095f5.js";import"./firebase-config-cf75009f.js";const W=()=>{const{addAddress:f}=R();return d("form",{className:"address-popup",onSubmit:v=>{const{target:{firstname:s,lastname:M,zipcode:A,state:y,city:I,street:N,country:g}}=v;v.preventDefault();const m={firstname:s.value,lastname:M.value,zipcode:A.value,state:y.value,city:I.value,street:N.value,country:g.options[g.selectedIndex].innerText};f(m),v.target.remove()},children:[e("label",{htmlFor:"firstname",children:"first name"}),e("input",{required:!0,type:"text",id:"firstname"}),e("label",{htmlFor:"lastname",children:"last name"}),e("input",{required:!0,type:"text",id:"lastname"}),e("label",{htmlFor:"country",children:"country"}),d("select",{id:"country",name:"country",children:[e("option",{children:"select country"}),e("option",{value:"AF",children:"Afghanistan"}),e("option",{value:"AX",children:"Aland Islands"}),e("option",{value:"AL",children:"Albania"}),e("option",{value:"DZ",children:"Algeria"}),e("option",{value:"AS",children:"American Samoa"}),e("option",{value:"AD",children:"Andorra"}),e("option",{value:"AO",children:"Angola"}),e("option",{value:"AI",children:"Anguilla"}),e("option",{value:"AQ",children:"Antarctica"}),e("option",{value:"AG",children:"Antigua and Barbuda"}),e("option",{value:"AR",children:"Argentina"}),e("option",{value:"AM",children:"Armenia"}),e("option",{value:"AW",children:"Aruba"}),e("option",{value:"AU",children:"Australia"}),e("option",{value:"AT",children:"Austria"}),e("option",{value:"AZ",children:"Azerbaijan"}),e("option",{value:"BS",children:"Bahamas"}),e("option",{value:"BH",children:"Bahrain"}),e("option",{value:"BD",children:"Bangladesh"}),e("option",{value:"BB",children:"Barbados"}),e("option",{value:"BY",children:"Belarus"}),e("option",{value:"BE",children:"Belgium"}),e("option",{value:"BZ",children:"Belize"}),e("option",{value:"BJ",children:"Benin"}),e("option",{value:"BM",children:"Bermuda"}),e("option",{value:"BT",children:"Bhutan"}),e("option",{value:"BO",children:"Bolivia"}),e("option",{value:"BQ",children:"Bonaire, Sint Eustatius and Saba"}),e("option",{value:"BA",children:"Bosnia and Herzegovina"}),e("option",{value:"BW",children:"Botswana"}),e("option",{value:"BV",children:"Bouvet Island"}),e("option",{value:"BR",children:"Brazil"}),e("option",{value:"IO",children:"British Indian Ocean Territory"}),e("option",{value:"BN",children:"Brunei Darussalam"}),e("option",{value:"BG",children:"Bulgaria"}),e("option",{value:"BF",children:"Burkina Faso"}),e("option",{value:"BI",children:"Burundi"}),e("option",{value:"KH",children:"Cambodia"}),e("option",{value:"CM",children:"Cameroon"}),e("option",{value:"CA",children:"Canada"}),e("option",{value:"CV",children:"Cape Verde"}),e("option",{value:"KY",children:"Cayman Islands"}),e("option",{value:"CF",children:"Central African Republic"}),e("option",{value:"TD",children:"Chad"}),e("option",{value:"CL",children:"Chile"}),e("option",{value:"CN",children:"China"}),e("option",{value:"CX",children:"Christmas Island"}),e("option",{value:"CC",children:"Cocos (Keeling) Islands"}),e("option",{value:"CO",children:"Colombia"}),e("option",{value:"KM",children:"Comoros"}),e("option",{value:"CG",children:"Congo"}),e("option",{value:"CD",children:"Congo, Democratic Republic of the Congo"}),e("option",{value:"CK",children:"Cook Islands"}),e("option",{value:"CR",children:"Costa Rica"}),e("option",{value:"CI",children:"Cote D'Ivoire"}),e("option",{value:"HR",children:"Croatia"}),e("option",{value:"CU",children:"Cuba"}),e("option",{value:"CW",children:"Curacao"}),e("option",{value:"CY",children:"Cyprus"}),e("option",{value:"CZ",children:"Czech Republic"}),e("option",{value:"DK",children:"Denmark"}),e("option",{value:"DJ",children:"Djibouti"}),e("option",{value:"DM",children:"Dominica"}),e("option",{value:"DO",children:"Dominican Republic"}),e("option",{value:"EC",children:"Ecuador"}),e("option",{value:"EG",children:"Egypt"}),e("option",{value:"SV",children:"El Salvador"}),e("option",{value:"GQ",children:"Equatorial Guinea"}),e("option",{value:"ER",children:"Eritrea"}),e("option",{value:"EE",children:"Estonia"}),e("option",{value:"ET",children:"Ethiopia"}),e("option",{value:"FK",children:"Falkland Islands (Malvinas)"}),e("option",{value:"FO",children:"Faroe Islands"}),e("option",{value:"FJ",children:"Fiji"}),e("option",{value:"FI",children:"Finland"}),e("option",{value:"FR",children:"France"}),e("option",{value:"GF",children:"French Guiana"}),e("option",{value:"PF",children:"French Polynesia"}),e("option",{value:"TF",children:"French Southern Territories"}),e("option",{value:"GA",children:"Gabon"}),e("option",{value:"GM",children:"Gambia"}),e("option",{value:"GE",children:"Georgia"}),e("option",{value:"DE",children:"Germany"}),e("option",{value:"GH",children:"Ghana"}),e("option",{value:"GI",children:"Gibraltar"}),e("option",{value:"GR",children:"Greece"}),e("option",{value:"GL",children:"Greenland"}),e("option",{value:"GD",children:"Grenada"}),e("option",{value:"GP",children:"Guadeloupe"}),e("option",{value:"GU",children:"Guam"}),e("option",{value:"GT",children:"Guatemala"}),e("option",{value:"GG",children:"Guernsey"}),e("option",{value:"GN",children:"Guinea"}),e("option",{value:"GW",children:"Guinea-Bissau"}),e("option",{value:"GY",children:"Guyana"}),e("option",{value:"HT",children:"Haiti"}),e("option",{value:"HM",children:"Heard Island and Mcdonald Islands"}),e("option",{value:"VA",children:"Holy See (Vatican City State)"}),e("option",{value:"HN",children:"Honduras"}),e("option",{value:"HK",children:"Hong Kong"}),e("option",{value:"HU",children:"Hungary"}),e("option",{value:"IS",children:"Iceland"}),e("option",{value:"IN",children:"India"}),e("option",{value:"ID",children:"Indonesia"}),e("option",{value:"IR",children:"Iran, Islamic Republic of"}),e("option",{value:"IQ",children:"Iraq"}),e("option",{value:"IE",children:"Ireland"}),e("option",{value:"IM",children:"Isle of Man"}),e("option",{value:"IL",children:"Israel"}),e("option",{value:"IT",children:"Italy"}),e("option",{value:"JM",children:"Jamaica"}),e("option",{value:"JP",children:"Japan"}),e("option",{value:"JE",children:"Jersey"}),e("option",{value:"JO",children:"Jordan"}),e("option",{value:"KZ",children:"Kazakhstan"}),e("option",{value:"KE",children:"Kenya"}),e("option",{value:"KI",children:"Kiribati"}),e("option",{value:"KP",children:"Korea, Democratic People's Republic of"}),e("option",{value:"KR",children:"Korea, Republic of"}),e("option",{value:"XK",children:"Kosovo"}),e("option",{value:"KW",children:"Kuwait"}),e("option",{value:"KG",children:"Kyrgyzstan"}),e("option",{value:"LA",children:"Lao People's Democratic Republic"}),e("option",{value:"LV",children:"Latvia"}),e("option",{value:"LB",children:"Lebanon"}),e("option",{value:"LS",children:"Lesotho"}),e("option",{value:"LR",children:"Liberia"}),e("option",{value:"LY",children:"Libyan Arab Jamahiriya"}),e("option",{value:"LI",children:"Liechtenstein"}),e("option",{value:"LT",children:"Lithuania"}),e("option",{value:"LU",children:"Luxembourg"}),e("option",{value:"MO",children:"Macao"}),e("option",{value:"MK",children:"Macedonia, the Former Yugoslav Republic of"}),e("option",{value:"MG",children:"Madagascar"}),e("option",{value:"MW",children:"Malawi"}),e("option",{value:"MY",children:"Malaysia"}),e("option",{value:"MV",children:"Maldives"}),e("option",{value:"ML",children:"Mali"}),e("option",{value:"MT",children:"Malta"}),e("option",{value:"MH",children:"Marshall Islands"}),e("option",{value:"MQ",children:"Martinique"}),e("option",{value:"MR",children:"Mauritania"}),e("option",{value:"MU",children:"Mauritius"}),e("option",{value:"YT",children:"Mayotte"}),e("option",{value:"MX",children:"Mexico"}),e("option",{value:"FM",children:"Micronesia, Federated States of"}),e("option",{value:"MD",children:"Moldova, Republic of"}),e("option",{value:"MC",children:"Monaco"}),e("option",{value:"MN",children:"Mongolia"}),e("option",{value:"ME",children:"Montenegro"}),e("option",{value:"MS",children:"Montserrat"}),e("option",{value:"MA",children:"Morocco"}),e("option",{value:"MZ",children:"Mozambique"}),e("option",{value:"MM",children:"Myanmar"}),e("option",{value:"NA",children:"Namibia"}),e("option",{value:"NR",children:"Nauru"}),e("option",{value:"NP",children:"Nepal"}),e("option",{value:"NL",children:"Netherlands"}),e("option",{value:"AN",children:"Netherlands Antilles"}),e("option",{value:"NC",children:"New Caledonia"}),e("option",{value:"NZ",children:"New Zealand"}),e("option",{value:"NI",children:"Nicaragua"}),e("option",{value:"NE",children:"Niger"}),e("option",{value:"NG",children:"Nigeria"}),e("option",{value:"NU",children:"Niue"}),e("option",{value:"NF",children:"Norfolk Island"}),e("option",{value:"MP",children:"Northern Mariana Islands"}),e("option",{value:"NO",children:"Norway"}),e("option",{value:"OM",children:"Oman"}),e("option",{value:"PK",children:"Pakistan"}),e("option",{value:"PW",children:"Palau"}),e("option",{value:"PS",children:"Palestinian Territory, Occupied"}),e("option",{value:"PA",children:"Panama"}),e("option",{value:"PG",children:"Papua New Guinea"}),e("option",{value:"PY",children:"Paraguay"}),e("option",{value:"PE",children:"Peru"}),e("option",{value:"PH",children:"Philippines"}),e("option",{value:"PN",children:"Pitcairn"}),e("option",{value:"PL",children:"Poland"}),e("option",{value:"PT",children:"Portugal"}),e("option",{value:"PR",children:"Puerto Rico"}),e("option",{value:"QA",children:"Qatar"}),e("option",{value:"RE",children:"Reunion"}),e("option",{value:"RO",children:"Romania"}),e("option",{value:"RU",children:"Russian Federation"}),e("option",{value:"RW",children:"Rwanda"}),e("option",{value:"BL",children:"Saint Barthelemy"}),e("option",{value:"SH",children:"Saint Helena"}),e("option",{value:"KN",children:"Saint Kitts and Nevis"}),e("option",{value:"LC",children:"Saint Lucia"}),e("option",{value:"MF",children:"Saint Martin"}),e("option",{value:"PM",children:"Saint Pierre and Miquelon"}),e("option",{value:"VC",children:"Saint Vincent and the Grenadines"}),e("option",{value:"WS",children:"Samoa"}),e("option",{value:"SM",children:"San Marino"}),e("option",{value:"ST",children:"Sao Tome and Principe"}),e("option",{value:"SA",children:"Saudi Arabia"}),e("option",{value:"SN",children:"Senegal"}),e("option",{value:"RS",children:"Serbia"}),e("option",{value:"CS",children:"Serbia and Montenegro"}),e("option",{value:"SC",children:"Seychelles"}),e("option",{value:"SL",children:"Sierra Leone"}),e("option",{value:"SG",children:"Singapore"}),e("option",{value:"SX",children:"Sint Maarten"}),e("option",{value:"SK",children:"Slovakia"}),e("option",{value:"SI",children:"Slovenia"}),e("option",{value:"SB",children:"Solomon Islands"}),e("option",{value:"SO",children:"Somalia"}),e("option",{value:"ZA",children:"South Africa"}),e("option",{value:"GS",children:"South Georgia and the South Sandwich Islands"}),e("option",{value:"SS",children:"South Sudan"}),e("option",{value:"ES",children:"Spain"}),e("option",{value:"LK",children:"Sri Lanka"}),e("option",{value:"SD",children:"Sudan"}),e("option",{value:"SR",children:"Suriname"}),e("option",{value:"SJ",children:"Svalbard and Jan Mayen"}),e("option",{value:"SZ",children:"Swaziland"}),e("option",{value:"SE",children:"Sweden"}),e("option",{value:"CH",children:"Switzerland"}),e("option",{value:"TW",children:"Taiwan, Province of China"}),e("option",{value:"TJ",children:"Tajikistan"}),e("option",{value:"TZ",children:"Tanzania, United Republic of"}),e("option",{value:"TH",children:"Thailand"}),e("option",{value:"TL",children:"Timor-Leste"}),e("option",{value:"TG",children:"Togo"}),e("option",{value:"TK",children:"Tokelau"}),e("option",{value:"TO",children:"Tonga"}),e("option",{value:"TT",children:"Trinidad and Tobago"}),e("option",{value:"TN",children:"Tunisia"}),e("option",{value:"TR",children:"Turkey"}),e("option",{value:"TM",children:"Turkmenistan"}),e("option",{value:"TC",children:"Turks and Caicos Islands"}),e("option",{value:"TV",children:"Tuvalu"}),e("option",{value:"UG",children:"Uganda"}),e("option",{value:"UA",children:"Ukraine"}),e("option",{value:"AE",children:"United Arab Emirates"}),e("option",{value:"GB",children:"United Kingdom"}),e("option",{value:"US",children:"United States"}),e("option",{value:"UM",children:"United States Minor Outlying Islands"}),e("option",{value:"UY",children:"Uruguay"}),e("option",{value:"UZ",children:"Uzbekistan"}),e("option",{value:"VU",children:"Vanuatu"}),e("option",{value:"VE",children:"Venezuela"}),e("option",{value:"VN",children:"Viet Nam"}),e("option",{value:"VG",children:"Virgin Islands, British"}),e("option",{value:"VI",children:"Virgin Islands, U.s."}),e("option",{value:"WF",children:"Wallis and Futuna"}),e("option",{value:"EH",children:"Western Sahara"}),e("option",{value:"YE",children:"Yemen"}),e("option",{value:"ZM",children:"Zambia"}),e("option",{value:"ZW",children:"Zimbabwe"})]}),e("label",{htmlFor:"zipcode",children:"zipcode"}),e("input",{required:!0,type:"number",id:"zipcode"}),e("label",{htmlFor:"state",children:"state"}),e("input",{required:!0,type:"text",id:"state"}),e("label",{htmlFor:"city",children:"city"}),e("input",{required:!0,type:"text",id:"city"}),e("label",{htmlFor:"street",children:"street"}),e("input",{required:!0,type:"text",id:"street"}),e("button",{children:"Add address"})]})},Y=W;function ee(){const{categories:f,products:v}=Z(),{currentUser:s}=z(),{setQuanitiyDb:M,removeCartProduct:A,getCartProducts:y,checkout:I,getAddress:N}=R(),[g,m]=h.useState(),[a,G]=h.useState(),[l,B]=h.useState([]),[E,C]=h.useState(0),[L,K]=h.useState(),P=O(),D=()=>{C(()=>l.reduce((n,i)=>{var c,u;return((c=i[0])==null?void 0:c.price)===void 0?0:parseFloat(n)+parseFloat((u=i[0])==null?void 0:u.price)*parseFloat(i[2])},0))};h.useEffect(()=>{async function n(){if(s===null)return P("/Tech-Mode/login"),B(null);s.emailVerified||P("/Tech-Mode/notverified");const i=await y();B(i.map(c=>{const u=c.directory.slice(0,20),b=c.directory.slice(21);return[v.find(S=>S.category.id===u&&parseInt(S.id)===parseInt(b)),u,parseInt(c.quantity)]})),l.length===0&&m(!1)}n()},[f,s]),h.useEffect(()=>{function n(){l[0]!==void 0&&(m(!0),G(()=>l==null?void 0:l.map(i=>i==null?void 0:i[2])),D(),m(!1))}n()},[l]);const U=l==null?void 0:l.map((n,i)=>{var c,u,b,S,F;return n[0]===void 0?e($,{}):d("div",{className:"product-cart-card flex align-ce gap-1",children:[e("img",{src:(c=n[0])==null?void 0:c.photos[0],alt:""}),e("span",{children:(u=n[0])==null?void 0:u.title}),d("span",{className:"flex gap-1 align-ce justify-ce",children:[e("button",{onClick:()=>{var p;C(r=>{var o;return parseFloat(r)+parseFloat((o=n[0])==null?void 0:o.price)}),G(r=>r==null?void 0:r.map((o,t)=>t===i?o+1:o)),M((a==null?void 0:a[i])+1,`${n[1]}-${(p=n[0])==null?void 0:p.id}`)},className:"counter-btn flex align-ce justify-ce",children:e(T,{icon:"add"})}),a==null?void 0:a[i],e("button",{onClick:p=>{var r;(a==null?void 0:a[i])!==1&&(C(o=>{var t;return parseFloat(o)-parseFloat((t=n[0])==null?void 0:t.price)}),G(o=>o.map((t,V)=>V===i?t-1:t)),M((a==null?void 0:a[i])-1,`${n[1]}-${(r=n[0])==null?void 0:r.id}`))},className:"counter-btn flex align-ce justify-ce",children:e(T,{icon:"remove"})})]}),e(w,{to:`/Tech-Mode/product/${n[1]}-${(b=n[0])==null?void 0:b.id}`,className:"view-link",children:"view"}),d("span",{className:"price",children:["Price: ",(S=n[0])==null?void 0:S.price," $"]}),e("button",{className:"btn-remove pointer",onClick:()=>{var p;B(r=>r.filter(o=>{var t;return`${o[1]}-${o[0].id}`!=`${n[1]}-${(t=n[0])==null?void 0:t.id}`})),C(r=>{var o;return parseFloat(r)-parseFloat((o=n[0])==null?void 0:o.price)*parseFloat(a==null?void 0:a[i])}),A(`${n[1]}-${(p=n[0])==null?void 0:p.id}`)},children:e(T,{icon:"cancel"})})]},`${n[1]}-${(F=n[0])==null?void 0:F.id}`)});function k(){return l.map((n,i)=>({id:`${n[1]}-${n[0].id}`,quantity:a[i]}))}async function H(){const n=k();if((await N()).length===0)return K(!0);I(n)}return!g&&(l==null?void 0:l.length)===0?e("div",{className:"container",children:e(J,{products:[],title:" No product has been added"})}):d("div",{className:"cart-container container flex flex-direc align-ce gap-2",children:[U,L&&e(Y,{}),d("div",{className:"buy-details",children:[d("div",{className:"sub-total-price",children:["Subtotal : ",E," $"]}),e("button",{className:"btn-buy",onClick:H,children:"Check Out"})]})]})}export{ee as default};
