import{r,a as i,j as t,F as d,R as I,u as S,d as T}from"./index-2f36ddde.js";import{M as $}from"./index-10cd52df.js";import{useCategories as j}from"./CategoiresContext-2885817d.js";import{a as E}from"./SetOutFucntions-8df471c2.js";import"./index-4d501b15.js";import"./firebase-config-409fc865.js";function y({title:u=Text,text:a=Text}){const[n,o]=r.useState(),c=1e3;return r.useEffect(()=>{o(i("div",{className:"popup",style:{animation:`poping ${c}ms`},children:[t("h3",{className:"title",children:u}),t("p",{className:"text",children:a})]})),setTimeout(()=>o(t(d,{})),c)},[]),n}const F=({photos:u})=>{const a=r.useRef([]),n=r.useRef([]),o=e=>{e&&!a.current.includes(e)&&a.current.push(e)},c=e=>{e&&!n.current.includes(e)&&n.current.push(e)},p=e=>{a.current.forEach((s,f)=>{const m=n.current[f];m.classList.remove("active"),s.classList.remove("active"),e===f&&(s.classList.add("active"),m.classList.add("active"))})},h=u.map((e,s)=>i(I.Fragment,{children:[t("img",{className:`${s===0?"active":""}`,src:e,alt:"",ref:o}),i("button",{style:{translate:`0 calc(${s}rem + 100% * ${s})`},className:`${s===0?"active":""}`,ref:c,onMouseOver:()=>p(s),children:[" ",t("img",{className:"active",src:e,alt:""})]})]},s));return t(d,{children:h})};function B(){const u=S();let{productDirec:a}=T();const n=a.split("-")[0],o=parseInt(a.split("-")[1]),[c,p]=r.useState(1),[h,e]=r.useState(t(d,{})),{products:s}=j(),{addFavorite:f,addToCart:m}=E(),N=r.useRef(),g=s.find(l=>l.category.id===n&&parseInt(l.id)===parseInt(o));if(g===void 0)return t(d,{});const{price:b,photos:x,title:v,details:R}=g;function C(){m(a,c).then(()=>u(" /cart"))}return t("div",{className:"container",children:i("main",{className:"product-container flex",children:[t("div",{className:"img-box flex justify-ce align-ce",children:t(F,{photos:x})}),i("div",{className:"details",children:[t("h2",{className:"title",children:v}),i("p",{className:"price",children:[b," $"]}),i("div",{children:[t("h3",{children:"description"}),i("p",{className:"description",children:[R," "]})]})]}),i("div",{children:[i("div",{className:"quantity flex flex-direc",children:[t("label",{htmlFor:"quantity",children:"Quantity"}),t("input",{type:"number",id:"quantity",value:c,onChange:l=>{p(l.target.value)},min:"1"})]}),i("div",{className:"flex align-ce",children:[t("button",{className:"btn-add",onClick:()=>{m(a,c),e(t(y,{text:v,title:"added to cart"})),setTimeout(()=>e(t(d,{})),1e3)},children:"Add to Cart"}),t("button",{ref:N,className:"btn-favorite",onClick:async()=>{const l=await f(a,N);e(t(y,{title:l?"added":"removed",text:v})),setTimeout(()=>e(t(d,{})),1e3)},children:t($,{icon:"favorite"})})]}),t("button",{onClick:C,className:"btn-buy flex justify-ce align-ce",children:"Buy Now"})]}),h]})})}export{B as default};
