import{r,a as c,j as t,F as d,R as I,u as T,d as S}from"./index-34aaf63e.js";import{M as $}from"./index-d8fb095e.js";import{useCategories as j}from"./CategoiresContext-a3c24581.js";import{a as E}from"./SetOutFucntions-c0e8fae2.js";import"./firebase-config-cf75009f.js";function y({title:u=Text,text:a=Text}){const[n,o]=r.useState(),i=1e3;return r.useEffect(()=>{o(c("div",{className:"popup",style:{animation:`poping ${i}ms`},children:[t("h3",{className:"title",children:u}),t("p",{className:"text",children:a})]})),setTimeout(()=>o(t(d,{})),i)},[]),n}const F=({photos:u})=>{const a=r.useRef([]),n=r.useRef([]),o=e=>{e&&!a.current.includes(e)&&a.current.push(e)},i=e=>{e&&!n.current.includes(e)&&n.current.push(e)},p=e=>{a.current.forEach((s,f)=>{const m=n.current[f];m.classList.remove("active"),s.classList.remove("active"),e===f&&(s.classList.add("active"),m.classList.add("active"))})},h=u.map((e,s)=>c(I.Fragment,{children:[t("img",{className:`${s===0?"active":""}`,src:e,alt:"",ref:o}),c("button",{style:{translate:`0 calc(${s}rem + 100% * ${s})`},className:`${s===0?"active":""}`,ref:i,onMouseOver:()=>p(s),children:[" ",t("img",{className:"active",src:e,alt:""})]})]},s));return t(d,{children:h})};function k(){const u=T();let{productDirec:a}=S();const n=a.split("-")[0],o=parseInt(a.split("-")[1]),[i,p]=r.useState(1),[h,e]=r.useState(t(d,{})),{products:s}=j(),{addFavorite:f,addToCart:m}=E(),N=r.useRef(),g=s.find(l=>l.category.id===n&&parseInt(l.id)===parseInt(o));if(g===void 0)return t(d,{});const{price:b,photos:x,title:v,details:R}=g;function C(){m(a,i).then(()=>u("/Tech-Mode/cart"))}return t("div",{className:"container",children:c("main",{className:"product-container flex",children:[t("div",{className:"img-box flex justify-ce align-ce",children:t(F,{photos:x})}),c("div",{className:"details",children:[t("h2",{className:"title",children:v}),c("p",{className:"price",children:[b," $"]}),c("div",{children:[t("h3",{children:"description"}),c("p",{className:"description",children:[R," "]})]})]}),c("div",{children:[c("div",{className:"quantity flex flex-direc",children:[t("label",{htmlFor:"quantity",children:"Quantity"}),t("input",{type:"number",id:"quantity",value:i,onChange:l=>{p(l.target.value)},min:"1"})]}),c("div",{className:"flex align-ce",children:[t("button",{className:"btn-add",onClick:()=>{m(a,i),e(t(y,{text:v,title:"added to cart"})),setTimeout(()=>e(t(d,{})),1e3)},children:"Add to Cart"}),t("button",{ref:N,className:"btn-favorite",onClick:async()=>{const l=await f(a,N);e(t(y,{title:l?"added":"removed",text:v})),setTimeout(()=>e(t(d,{})),1e3)},children:t($,{icon:"favorite"})})]}),t("button",{onClick:C,className:"btn-buy flex justify-ce align-ce",children:"Buy Now"})]}),h]})})}export{k as default};
